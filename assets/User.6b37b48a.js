import"./el-tooltip.a3af5ee2.js";import{E as j}from"./el-image-viewer.f2d7d23f.js";import{E as z,a as w}from"./el-switch.c3f0abad.js";import{E as G,M as J,a as X,b as Y}from"./MyPagination.c59298a6.js";import{_ as E,E as Z}from"./MyDialog.383463e7.js";import{d as ee,u as ae,r as d,e as x,K as te,l as ue,o as oe,c as le,m as o,n as r,q as l,s as A,x as ne,a as b,t as _,y as m}from"./index.41b9361d.js";import"./el-table-column.5d709dc1.js";import"./aria.75ec5909.js";import"./index.0da6d2ae.js";/* empty css                */const se=[{property:"id",slotName:"id",label:"\u7528\u6237\u7F16\u53F7",showOverflowTooltip:!0,width:"120"},{property:"name",slotName:"name",label:"\u7528\u6237\u540D",minWidth:"100"},{property:"username",slotName:"username",label:"\u8D26\u53F7",minWidth:"100"},{property:"type",slotName:"type",label:"\u89D2\u8272",minWidth:"100"},{property:"image",slotName:"image",label:"\u5934\u50CF",minWidth:"120"},{property:"status",slotName:"status",label:"\u72B6\u6001",minWidth:"120"},{property:"createTime",slotName:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"134"},{property:"updateTime",slotName:"updateTime",label:"\u66F4\u65B0\u65F6\u95F4",width:"134"},{slotName:"operation",label:"\u64CD\u4F5C",minWidth:"120"}],ie=[{type:"INPUT",label:"\u7528\u6237\u540D",labelWidth:"60px",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",field:"nameLike"},{type:"SELECT",label:"\u89D2\u8272",labelWidth:"60px",field:"type",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",options:[{label:"\u89C2\u4F17",value:"0"},{label:"\u8BC4\u59D4",value:"1"},{label:"\u53C2\u8D5B\u9009\u624B",value:"2"}]}],re={title:"\u89C2\u4F17\u6279\u91CF\u6DFB\u52A0",confirmText:"\u6279\u91CF\u6DFB\u52A0",items:[{type:"INPUT",label:"\u7528\u6237\u6570\u91CF",labelWidth:"80px",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6570\u91CF",field:"number"}]},ce={title:"\u6DFB\u52A0\u7528\u6237",confirmText:"\u6DFB\u52A0",items:[{type:"INPUT",label:"\u7528\u6237\u540D",labelWidth:"60px",placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",field:"name"},{type:"INPUT",label:"\u8D26\u53F7",labelWidth:"60px",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",field:"username"},{type:"PASSWORD",label:"\u5BC6\u7801",labelWidth:"60px",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",field:"password"},{type:"SELECT",label:"\u89D2\u8272",labelWidth:"60px",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272",field:"type",options:[{label:"\u89C2\u4F17",value:"0"},{label:"\u8BC4\u59D4",value:"1"},{label:"\u53C2\u8D5B\u9009\u624B",value:"2"}]},{type:"UPLOAD",label:"\u5934\u50CF",labelWidth:"60px",action:"http://175.178.254.201:18720/oss/upload",autoUpload:!0}]},de={class:"user"},pe=m("\u5BFC\u51FA"),me=m("\u6279\u91CF\u6DFB\u52A0\u89C2\u4F17"),ge=m("\u65B0\u589E"),he=m("\u6279\u91CF\u5220\u9664"),fe={class:"operation"},be=m("\u7F16\u8F91"),ye=m("\u5220\u9664"),Ue=ee({__name:"User",setup(Ce){const{user:t}=ae(),y=d({});let C=d([]);const D=d([]),T=530,U=()=>{t.exportUser()},v=d({number:0}),g=d(!1),k=e=>{g.value=e},N=()=>{g.value=!0},S=()=>{const e=Z.service({fullscreen:!1});t.batchAdd(v.value.number,g,e)},W=d(),h=d(!1),f=d({name:"",username:"",password:"",type:"",image:""}),P=e=>{h.value=e},L=()=>{h.value=!0},I=e=>{f.value.image=e},V=()=>{t.addUser(f.value,h),f.value={name:"",username:"",password:"",type:"",image:""}},p=x({nameLike:"",type:""}),c=x({name:"",type:""}),M=()=>{p.nameLike||p.type?t.getUserTablePageData(1,{name:c.name,type:c.type}):A("warning","\u672A\u6DFB\u52A0\u67E5\u8BE2\u6761\u4EF6")},$=()=>{p.nameLike="",p.type="",ne(()=>{t.getUserTablePageData(1,{name:c.name,type:c.type})})},H=e=>{D.value=[...e]},O=()=>{const e=[];if(!D.value.length){A("warning","\u60A8\u672A\u9009\u4E2D\u5220\u9664\u5143\u7D20");return}D.value.forEach(s=>{e.push(s.id)}),w.confirm(`\u60A8\u786E\u5B9A\u8981\u5220\u9664\u3010${e}\u3011\u5417`,{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{t.deleteUser(e)})},q=async e=>{await t.getUserTablePageData(e,{name:c.name,type:c.type})},Q=e=>{const s=e.id,u=e.status;s&&u&&t.changeStatus(u,s)},R=e=>{console.log(e.row)},K=e=>{w.confirm(`\u60A8\u786E\u5B9A\u8981\u5220\u9664\u3010${e}\u3011\u5417`,{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{const s=[];s.push(e),t.deleteUser(s)})};return te(async()=>{await t.getUserTablePageData(1),C.value=t.pageConfig.records;const{current:e,total:s}=t.pageConfig;y.value={currentPage:e,total:s},t.$subscribe((u,F)=>{C.value=F.pageConfig.records;const{current:B,total:a}=t.pageConfig;y.value={currentPage:B,total:a}}),ue(p,u=>{c.name=u.nameLike,c.type=u.type},{deep:!0})}),(e,s)=>{const u=G,F=z,B=j;return oe(),le("div",de,[o(r(J),{"bind-data":p,"search-config":r(ie),onResetSearch:$,onQuerySearch:M},null,8,["bind-data","search-config"]),o(r(X),{records:r(C),"table-config":r(se),height:T,"is-select":!0,onSelectChange:H},{extraOperation:l(()=>[o(u,{onClick:U},{default:l(()=>[pe]),_:1}),o(u,{type:"primary",onClick:N},{default:l(()=>[me]),_:1}),o(u,{type:"success",onClick:L},{default:l(()=>[ge]),_:1}),o(u,{type:"danger",onClick:O},{default:l(()=>[he]),_:1})]),status:l(({scope:a,item:n})=>[o(F,{modelValue:a.row[n.property],"onUpdate:modelValue":i=>a.row[n.property]=i,style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},"active-value":"1","inactive-value":"0",onChange:i=>Q(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),type:l(({scope:a,item:n})=>[b("span",null,_(a.row[n.property]=="0"?"\u89C2\u4F17":a.row[n.property]=="1"?"\u8BC4\u59D4":"\u53C2\u8D5B\u9009\u624B"),1)]),image:l(({scope:a,item:n})=>[o(B,{style:{width:"48px",height:"48px"},src:a.row[n.property],fit:"cover"},null,8,["src"])]),createTime:l(({scope:a,item:n})=>{var i;return[b("span",null,_((i=a.row[n.property])==null?void 0:i.split(" ")[0]),1)]}),updateTime:l(({scope:a,item:n})=>{var i;return[b("span",null,_((i=a.row[n.property])==null?void 0:i.split(" ")[0]),1)]}),operation:l(({scope:a,item:n})=>[b("div",fe,[o(u,{onClick:i=>R(a)},{default:l(()=>[be]),_:2},1032,["onClick"]),o(u,{onClick:i=>K(a.row.id),type:"danger"},{default:l(()=>[ye]),_:2},1032,["onClick"])])]),_:1},8,["records","table-config"]),o(r(Y),{"pagination-config":y.value,onCurrentChange:q},null,8,["pagination-config"]),o(r(E),{"dialog-config":r(re),"dialog-data":v.value,"dialog-form-visible":g.value,onHide:k,onConfirm:S},null,8,["dialog-config","dialog-data","dialog-form-visible"]),o(r(E),{"dialog-config":r(ce),"dialog-data":f.value,"dialog-form-visible":h.value,onHide:P,onConfirm:V,onChangeImageUrl:I,ref_key:"addDialog",ref:W},null,8,["dialog-config","dialog-data","dialog-form-visible"])])}}});export{Ue as default};
